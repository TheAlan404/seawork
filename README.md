# seawork

React-based Discord Bot Framework

Extremely cursed. Holy shit. Don't use this for prod.

## Installation

I wanted to make this a monorepo of framework and example app but I couldn't get everything working cleanly. So uh, clone/fork?

Use `pnpm` to install! I **patched** `@types/react` to not have default DOM elements on `React.JSX.IntrinsicElements` - this is so typescript works properly.

## Usage

Every command is a module. Define slash commands under `bot/commands/<path>`.

- `/ping` -> `bot/commands/ping.tsx`
- `/server options` -> `bot/commands/server/options.tsx` (subcommand)
- `/a b c` -> `bot/commands/a/b/c.tsx` (subcommand group)

```tsx
// bot/commands/counter.tsx

// Default export will be the rendered react component
export default function CounterCommand() {
    const [count, setCount] = useState(); // support for all non-DOM react hooks

    return (
        // Use JSX! A list of components will be below
        <message v2 ephemeral>
            <container>
                <text>
                    Counter: {count}
                </text>
                <actionRow>
                    <button
                        onClick={() => setCount(c => c - 1)}
                    >
                        -1
                    </button>
                    <button
                        onClick={() => setCount(c => c + 1)}
                    >
                        +1
                    </button>
                </actionRow>
            </container>
        </message>
    );
}
```

## Elements

- `message`
  - `v2`: boolean, use components v2
  - `ephemeral`: boolean, send message as ephemeral
- `container`
  - `spoiler`: boolean
  - `color`: ColorResolvable
- `actionRow`
- `button`
  - Children will be set as label
  - `onClick(int: ButtonInteraction)`
  - `customId`: string, this will be auto-generated by the framework
    - if you set this to a static value, all rendered components will recieve the click event
  - `disabled`: boolean
  - `url`: if set, will set button type to url internally
  - `skuId`: if set, will set button type to premium internally
  - `style`: button style as string excluding link and premium

all components are supported (**except all event handlers, WIP**) im lazy to write docs for all

**Using Sections**

```tsx
<section>
    <accessory>
        {/* <button> or <thumbnail> */}
    </accessory>

    {/* multiple <text> components */}
    {/* order doesn't matter */}
</section>
```

## TODO

- [x] Hot module reloading
- [ ] Implement all event handlers (WIP)
- [ ] module `options`
- [ ] module typegen
- [ ] module `execute`
- [ ] module `loader`
- [ ] Auto-publish commands

